# ![Python](https://img.icons8.com/color/32/python.png) AnnotationParser

> [–ß–∏—Ç–∞—Ç—å –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏](README.md)

AnnotationParser ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–º–µ—Ç–∫–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (LabelMe, COCO, VOC –∏ –¥—Ä.) –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏—Ö –∫ –µ–¥–∏–Ω–æ–º—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–º—É —Ç–∏–ø—É `Shape`.
–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–∏—Ç–∞—Ç—å, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–∏–≥—É—Ä—ã —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π.

> **–í–Ω–∏–º–∞–Ω–∏–µ:**
> –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç **LabelMe**.
> –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ (—Å–º. [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–ª–∞–Ω—ã](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è--–ø–ª–∞–Ω—ã)).

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

* [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
* [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
* [–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (CLI)](#–∫–æ–º–∞–Ω–¥–Ω–∞—è-—Å—Ç—Ä–æ–∫–∞-cli-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
* [–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã](#–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ-—Ñ–æ—Ä–º–∞—Ç—ã)
* [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–ª–∞–Ω—ã](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è--–ø–ª–∞–Ω—ã)
* [–ö–∞–∫ –ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É](#–∫–∞–∫-–ø–æ–º–æ—á—å-–ø—Ä–æ–µ–∫—Ç—É)
* [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
* [FAQ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#faq-–∏-—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
* [–ê–≤—Ç–æ—Ä](#–∞–≤—Ç–æ—Ä)
* [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ï–¥–∏–Ω—ã–π API –¥–ª—è —á—Ç–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∏–≥—É—Ä –∏–∑ —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–º–µ—Ç–∫–∏
* –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–º—É —Ç–∏–ø—É `Shape` –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã
* –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (LabelMe, COCO, VOC ...)
* –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏ –û–û–ü-—Å—Ç–∏–ª–∏ —Ä–∞–±–æ—Ç—ã
* –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ñ–∏–≥—É—Ä
* –ß–∏—Å—Ç—ã–π, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

> **–¢—Ä–µ–±—É–µ—Ç—Å—è Python 3.10+**

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ pip (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
pip install annotation-parser
```

–ò–ª–∏ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞:

```bash
pip install -e .
```

### –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (LabelMe)

```python
from annotation_parser import create, get_shapes_by_label

file = "tests/labelme/labelme_test.json"
parser = create(file, "labelme")
shapes = parser.parse()  # tuple of Shape

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–∏–≥—É—Ä—ã —Å label "person"
persons = get_shapes_by_label(shapes, "person")
print(persons)
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π

```python
from annotation_parser import save_labelme

save_labelme(shapes, "result.json", backup=True)
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω–µ, –Ω–æ–º–µ—Ä—É –≥—Ä—É–ø–ø—ã, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É

```python
from annotation_parser import get_shapes_by_wz_number, get_shapes_by_number, filter_shapes

# –ü–æ –Ω–æ–º–µ—Ä—É —Ä–∞–±–æ—á–µ–π –∑–æ–Ω—ã (wz_number)
zone2 = get_shapes_by_wz_number(shapes, wz_number=2)

# –ü–æ –Ω–æ–º–µ—Ä—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞/–≥—Ä—É–ø–ø—ã
group_1 = get_shapes_by_number(shapes, number=1)

# –ü–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–º—É –ø—Ä–µ–¥–∏–∫–∞—Ç—É (lambda)
big_shapes = filter_shapes(shapes, lambda s: hasattr(s, "coords") and len(s.coords) > 3)
```

### –û–û–ü-—Å—Ç–∏–ª—å (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)

```python
from annotation_parser import create

parser = create("tests/labelme/labelme_test.json", "labelme")
shapes = parser.parse()
# –ú–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å parser.save(), parser.parse(), parser.filter_shapes() –∏ –¥—Ä.
```

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å (—à–æ—Ä—Ç–∫–∞—Ç)

```python
from annotation_parser import parse_labelme

shapes = parse_labelme("tests/labelme/labelme_test.json")
```

---

## –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (CLI) \[—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ]

> **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ!** –ù–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ.
> –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–º. –≤ [cli.py](src/annotation_parser/cli.py).

```bash
python cli.py parse --file tests/labelme/labelme_test.json --adapter labelme
python cli.py save --file tests/labelme/labelme_test.json --adapter labelme --out result.json --backup
python cli.py filter --file tests/labelme/labelme_test.json --adapter labelme --label crop
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –§–æ—Ä–º–∞—Ç      | –°—Ç–∞—Ç—É—Å              |
| ----------- | ------------------- |
| **LabelMe** | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è    |
| COCO        | üïë –í –ø–ª–∞–Ω–∞—Ö         |
| Pascal VOC  | üïë –í –ø–ª–∞–Ω–∞—Ö         |
| YOLO        | üïë –í –ø–ª–∞–Ω–∞—Ö         |
| ...         | (–ü–∏—à–∏—Ç–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è!) |

> üí° **–•–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–∞—à–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞?**
> –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ issue –∏–ª–∏ PR: [omigutin/annotation\_parser/issues](https://github.com/omigutin/annotation_parser/issues)
> –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–º–æ—â—å —Å –∞–¥–∞–ø—Ç–µ—Ä–∞–º–∏!

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è & –ü–ª–∞–Ω—ã

* –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç **LabelMe**
* –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è COCO, Pascal VOC, YOLO –∏ –¥—Ä—É–≥–∏—Ö ‚Äî –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
* –í –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π logging —Å —É—Ä–æ–≤–Ω—è–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
* CLI (`cli.py`) ‚Äî —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π, —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

---

## –ö–∞–∫ –ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É

* –õ—é–±—ã–µ PR, –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!
* –í—Å–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Pull Request –≤ –≤–µ—Ç–∫—É develop.
* –í–µ—Ç–∫–∞ main –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤.
* –î–ª—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∞–¥–∞–ø—Ç–µ—Ä—ã –≤ src/annotation_parser/adapters/.
* –ü–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –∫–æ–¥-—Ä–µ–≤—å—é.
* –í–µ—Å—å –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω (mypy), –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω (black) –∏ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏ (pytest).
* –°–æ–∑–¥–∞–≤–∞–π—Ç–µ Issue –∏–ª–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞–¥–∞–ø—Ç–µ—Ä, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –≥–æ—Ç–æ–≤—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–≥–æ —Å–∞–º–∏.
* –•–æ—Ç–∏—Ç–µ —Å—Ç–∞—Ç—å –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–º?
    –î–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫, –∑–∞–≤–æ–¥–∏—Ç–µ –≤–µ—Ç–∫—É –æ—Ç develop, –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ Pull Request –∏–ª–∏ –ø–∏—à–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é (—Å–º. –∫–æ–Ω—Ç–∞–∫—Ç—ã).
    –õ—é–±–∞—è –ø–æ–º–æ—â—å –∏ –∏–¥–µ–∏ –ø–æ –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∞–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

  ```bash
  poetry install --with dev
  ```
* –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

  ```bash
  pytest
  ```

---

## FAQ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã LabelMe?**
A: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è LabelMe. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ COCO/VOC –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞.

**Q: CLI –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ?**
A: `cli.py` –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω. –°–º. [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–ª–∞–Ω—ã](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è--–ø–ª–∞–Ω—ã) –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python API –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

---

## –ê–≤—Ç–æ—Ä

[![Telegram](https://img.shields.io/badge/-Telegram-26A5E4?style=flat\&logo=telegram\&logoColor=white)](https://t.me/omigutin)
[![GitHub](https://img.shields.io/badge/-GitHub-181717?style=flat\&logo=github\&logoColor=white)](https://github.com/omigutin)

**–ü—Ä–æ–µ–∫—Ç:** [github.com/omigutin/annotation\_parser](https://github.com/omigutin/annotation_parser)
**–¢—Ä–µ–∫–µ—Ä:** [annotation\_parser Project Board](https://github.com/users/omigutin/projects/2)
–ö–æ–Ω—Ç–∞–∫—Ç: [migutin83@yandex.ru](mailto:migutin83@yandex.ru)

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License.
–°–º. [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.
